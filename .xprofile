#!/bin/sh
# This file is part of Danil Kutkevich <danil@kutkevich.org> home.
# `xprofile` is similar in syntax and in concept to `xinitrc`
# <https://wiki.archlinux.org/index.php/xprofile>.

# Merge in defaults and keymaps.
userresources=$HOME/.Xresources
usermodmap=$HOME/.Xmodmap
if [ -f "$userresources" ]; then
    # xrdb -merge "$userresources"
    xrdb -load "$userresources"
fi
if [ -f "$usermodmap" ]; then
    xmodmap "$usermodmap"
fi
if [ -d /etc/X11/xinit/xinitrc.d ]; then
  for f in /etc/X11/xinit/xinitrc.d/*; do
    [ -x "$f" ] && . "$f"
  done
  unset f
fi

# <https://wiki.ubuntu.com/CustomXSession#Sample_.2BAH4ALw.xinitrc_File>.

export LANG="en_US.UTF-8"

xset b off #turn off bell
xset dpms 420 #suspend monitor after 7 minutes <https://wiki.archlinux.org/index.php/i3#Screensaver_and_power_management>
~/bin/my-keyboard-auto-repeat-rate.sh

hash light 2>/dev/null && light -I #restore the previously saved brightness <https://github.com/haikarainen/light>

if hash argyll-dispwin 2>/dev/null; then
    # <https://wiki.archlinux.org/index.php/ICC_Profiles#Argyll_CMS>.
    display_calibrator=argyll-dispwin
elif hash dispwin 2>/dev/null; then
    # <https://wiki.archlinux.org/index.php/ICC_Profiles#dispwin>.
    display_calibrator=dispwin
elif hash xcalib 2>/dev/null; then
    # <https://wiki.archlinux.org/index.php/ICC_Profiles#xcalib>.
    display_calibrator=xcalib
fi

if [[ `hostname -s` == 'h3' ]]; then
    $display_calibrator ~/color_profile_thinkpad_t400s.icm &
elif [[ `hostname -s` == 'h10' ]]; then
    $display_calibrator ~/color_profile_thinkpad_t430.icc &
fi
